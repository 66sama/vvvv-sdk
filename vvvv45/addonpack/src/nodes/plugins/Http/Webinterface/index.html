<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script src="lib/jquery/jquery-1.3.2.js"></script>
		<script src="lib/jquery/jquery.timers-1.1.2.js"></script>	
		<script src="lib/Uploader/jquery.uploadify.js"></script>
		
		<title>StressTest</title>
		
			
			
		<script>
			
			
			
			function SetAjaxSetup(){
				mDataType = $('#dataType').val();
					mResponseType = $('#ResponseType').val();
					mTimeout = $('#timeout').val();
					mUrl = $('#RequestUrl').val();
					mContentType = $('#ContentType').val();
					mDataType = $('#dataType').val();
					
					$.ajaxSetup({
  						url: mUrl,
						dataType:mDataType,
						timeout:mTimeout,
  						global: true,
 						type: mResponseType,
						contentType:mContentType,
					});	
			}
			
					
			$(document).ready(function() {
					
				//Ajax Request 
				
				$("#SendAjaxRequest").click(function(){
					
					SetAjaxSetup();

					
					if($('#ResponseText').val() != null){
						mData = $('#ResponseText').val()
					}else
					 {
					 	mData = "Hello";
					 }
					
					$.ajax({
						data: mData,
					});
					
				});


				// Handle Ajax Callbacks
				 $("#Response").ajaxSend(function(evt, request, settings){
				   $(this).prepend("<li>Starting request at " + settings.url +"</li>");
				   $(this).prepend("<li>Ajax Options:  " + settings.type +"/"+ settings.dataType +"/"+ settings.timeout +"/"+ settings.data +"/"+ settings.contentType  +"</li>");
				 });
				 
				  $("#Response").ajaxSuccess(function(evt, request, settings){
				   $(this).prepend("<li>Successful Request!</li>" + "<li>Response Message:" + request.responseText +"</li>");
				 });
				 
				 $("#Response").ajaxError(function(event,request, settings, thrownError){
				 	
					 $(this).prepend("<li>Error requesting page " + settings.url + "</li>");
					 $(this).prepend("<li>Error Text: " + thrownError + "</li>");
					 
					  if(request.status == 404) {
					    $(this).prepend("<li>Xhr Status:  404 error" + "</li>");
					  }
					  else if(request.status == 403) {
					    $(this).prepend("<li>Xhr Status:  403 error" + "</li>");
					  }
 				});
				
				$("#Response").ajaxComplete(function(event,request, settings, thrownError){
				 	
					 $(this).prepend("<li>Complete Request " + settings.url + "</li>");
									 
					  if(request.status == 404) {
					    $(this).prepend("<li>Xhr Status:  404 error" + "</li>");
					  }
					  else if(request.status == 403) {
					    $(this).prepend("<li>Xhr Status:  403 error" + "</li>");
					  }
 				});
				
				
				
				//Console
				$("#Console").click(function(event){
					$('#Response').empty();
				});
				


				//Interval
				$("#IntervalOnOFF").change(function()
				{
					var times = $("#IntervalTime").val();
					var count = parseInt($("#IntervalCount").val());
					var flag = $("#IntervalOnOFF").attr('checked');
					
				 	if(flag == true)
					{
						
						SetAjaxSetup();
						$(document).everyTime(times,function(i) {
 							 processChunk(i);
						}, count);					
						
						$('#Response').prepend("<li>Start Interval</li>");
					}else
					{
						$('#Response').prepend("<li>Stop Interval</li>");
						$(document).stopTime();
					}

				});
								
			});
		</script>
		
		
		
		<script>
			function processChunk(i){
				$('#Response').prepend("<li>Request: " + i + "</li>");	
				
					if($('#ResponseText').val() != null){
						mData = $('#ResponseText').val()
					}
					else
					{
					 	mData = "Hello";
					}
					 
					$.ajax({
						data: mData,
					});
			};
		</script>

		
		
		
		<script type="text/javascript">
			$(document).ready(function() {
				$('#fileInput').fileUpload ({
					'uploader'  : 'lib/Uploader/uploader.swf',
					'script'    : 'lib/Uploader/upload.php',
					'cancelImg' : 'lib/Uploader/cancel.png',
					'auto'      : false,
					'folder'    : 'lib/Uploader/',
				});
			});
		</script>
		

		<style type="text/css">
			
			 a:link{
			 	color:#000;
				}
			 a:visited{
			 	color:#ff0;
				}
			 a:hover{
			 	color:#f00;
				}
			 a:active{
			 	color:#f00;
				}

			
			
			body{
				font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;						
			}
			
			.MainContainer
			{
				
			}
			
			.Inlays{
				margin-left: 10px;
				margin-right:10px;
				margin-top:10px;
				padding: 10px 10px 10px 10px;
			}
			
			.Config{
				width: 800px;
				height: 600px;
				background-color: #c0c0c0;
				}
			
			.Content{
				position:relative;
				top: -602px;
				left:801px;
				width:400px;
				height:600px;
				background-color: #c0c0c0;
			}
			
			.Response{
				position:relative;
				width: 800px;
				height: 400px;
				top: -603px;
				background-color: #c0c0c0;
			}
			
			.border
			{
				border: solid;
				border-color: #808080;
				border-width:1px;
			}
			
			body{
				/*
				background-image:url("test.jpg");
				*/
				background-position:center;
				background-repeat:repeat;
			}
			
			h2{
				margin-left:10px;
			}
					
			select
			{
				width:80px;
			}
			
		
		</style>
	</head>
	
	<body>

		<div class="MainContainer">
			
				<h1>StressTest</h1>
				<div class=  "Config border">
					<h2>Config</h2>
					
					
					<div class="Inlays border" >  
						<table width="100%">
							<tr>
								<td width="30%">url:</td>
								<td><input type="text" size="80" id="RequestUrl"  value="http://192.168.1.109/index.html"></td>
							</tr>
							<tr>
								<td >RequestType:</td>
								<td>
									<select id="ResponseType" >
										<option value="POST">POST</option>
										<option value="GET">GET</option>
										<option value="TRACE">TRACE</option>						
									</select>
								</td>
							</tr>
							<tr>
								<td >ContentType:</td>
								<td>							
									<select id="ContentType" >
										<option value="application/x-www-form-urlencoded">application/x-www-form-urlencoded</option>
										<option value="text/plain">text/plain</option>
										<option value="text/xml">text/xml</option>
										<option value="text/html">text/html</option>
										<option value="text/javascript">text/javascript</option>
										<option value="image/jpeg">image/jpeg</option>
										<option value="image/png">image/png</option>
										<option value="video/mpeg">video/mpeg</option>
										
									</select>
								</td>
							</tr>
							<tr>
								<td >DataType:</td>
								<td>							
									<select id="dataType" >
										<option value="text">text</option>
										<option value="xml">xml</option>
										<option value="html">html</option>
										<option value="jason">jason</option>
										<option value="script">script</option>
									</select>
								</td>
							</tr>
							<tr>
								<td >Timeout:</td>
								<td><input type="text" id="timeout" value="1000" size="9"></td>
							</tr>
							<tr>
								<td >SendAjaxRequest:</td>
								<td><input type="submit" id="SendAjaxRequest" value="Send"></td>
							</tr>						
						</table>
					</div>
										
					<div class="Inlays border">
						<table width="100%">
							<tr>
								<td width="30%">Console:</td>
								<td><input type="submit" id="Console" value="Delete" size="9"></td>
							</tr>
						</table>
					</div>
					
					<div class="Inlays border">
						<table width="100%">
							<tr>
								<td width="30%" >On/Off:</td>
								<td><input type="checkbox" id="IntervalOnOFF"></td>
							</tr>
							<tr>
								<td >Interval Time:</td>
								<td><input type="text" id="IntervalTime" value="1s"></td>
							</tr>
							<tr>
								<td >Interval Count:</td>
								<td><input type="text" id="IntervalCount" value="10"></td>
							</tr>							
						</table>
					</div>
					
				</div>
					

				<div class = "Content border">
					<h2>Content</h2>
					
					<div class="Inlays">
						<p><b>Text:</b></p>
						<textarea name="TextInput"  id="ResponseText" style="width:100%;height:100px" >var1=val1</textarea>	
					</div>
					
					<div class= "Inlays" >
						<p><b>Upload JQuery/Flash:</b></p>
						<input type="file" name="fileInput" id="fileInput" />
						<br>
						<a href="" style="text-decoration: none">Upload Files</a>
					</div>
													
					<div class="Inlays">
						<p><b>Upload 2:</b></p>
						<form action="http://192.168.1.109/index.html" nctype="" method="post">
							<p> Type some text (optionally):<br>
								<input type="text" id="txt" name="textline" size="30">
							</p>
							<p>
								
							Please specify a file, or a set of files:<br>
							<input type="file" name="datafile" size="40">
							</p>
							
							<div>
								<input type="submit" value="Send">
							</div>
						</form>
					</div>

									
				</div>
					
				
				
				<div class = "Response border" style="overflow:auto;">
					<h2>Response</h2>
					
					<div class="Inlays">
						<div class="Inlays" id="Response">
						</div> 
				</div>
					
				</div>
		</div>
	</body>
</html>
